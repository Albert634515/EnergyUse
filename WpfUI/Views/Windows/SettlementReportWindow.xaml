<Window x:Class="WpfUI.Views.Windows.SettlementReportWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:WpfUI.Views.Controls"
        xmlns:vm="clr-namespace:WpfUI.ViewModels"
        Title="Select Report Parameters"
        Height="650"
        Width="900">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Parameters -->
        <GroupBox Header="Parameters" Grid.Row="0" Padding="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="200"/>
                    <ColumnDefinition Width="200"/>
                    <ColumnDefinition Width="200"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Address -->
                <StackPanel Grid.Column="0">
                    <TextBlock Text="Address"/>
                    <ComboBox ItemsSource="{Binding AddressList}"
                              SelectedItem="{Binding SelectedAddress}"
                              DisplayMemberPath="Description"/>
                </StackPanel>

                <!-- Predefined periods -->
                <StackPanel Grid.Column="1">
                    <TextBlock Text="Predefined period"/>
                    <ComboBox ItemsSource="{Binding PredefinedPeriods}"
                              SelectedItem="{Binding SelectedPredefinedPeriod}"
                              DisplayMemberPath="Description"/>
                </StackPanel>

                <!-- Report type -->
                <StackPanel Grid.Column="2">
                    <TextBlock Text="Report type"/>
                    <ComboBox ItemsSource="{Binding ReportTypes}"
                              SelectedItem="{Binding SelectedReportType}"
                              DisplayMemberPath="Description"/>
                </StackPanel>

                <!-- Checkboxes -->
                <StackPanel Grid.Column="3">
                    <CheckBox Content="Predict missing data"
                              IsChecked="{Binding PredictMissingData}"/>
                    <CheckBox Content="Show rates"
                              IsChecked="{Binding ShowRates}"/>
                </StackPanel>
            </Grid>
        </GroupBox>

        <!-- Dynamic DateSelectionControls -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <ItemsControl ItemsSource="{Binding DateSelections}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <controls:DateSelectionControl />
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

        <!-- Buttons -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button Content="Add" Width="100" Margin="5" Command="{Binding AddDateSelectionCommand}"/>
            <Button Content="Select" Width="100" Margin="5" Command="{Binding SelectCommand}"/>
            <Button Content="Cancel" Width="100" Margin="5" Command="{Binding CancelCommand}"/>
        </StackPanel>

    </Grid>
</Window>